<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daniel Oli Fotografias</title>

    <link href="estilo.css" rel="stylesheet">
    <link rel="icon" href="/galerias/midia/icon.png" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

</head>

<body>

    <div class="screen">
        <div class="container">

            <!--
            <div id="controldiv">
                <form id="imageForm">
                    <input id="imageInput" type="file" accept="image/+">
                    <button type="submit">Fazer Upload</button><br>
                </form>                
            </div>
            -->
            <div id="topcard" >
                <img src="/galerias/midia/icon.png" id="icon">
                <div id="divider"></div>
            </div><br>

            <label id="loadlab">Recuperação de senha</label><br>

            <div id="controldiv">
                <label id="intro">Insira seu e-mail para recuperar a senha</label><br><br>
                <input type="e-mail" id="email" placeholder="E-mail">
                <button id="sendbtn">Enviar</button>
            </div>

            <div>
                <br><button id="backbutton"><a href="login.html">Voltar</a></button><br>

                <br><button id="backhome"><a href="/">Voltar ao Home</a></button>
            </div>
        </div>
    </div>

    <script type="module">
        import { getAuth, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-auth.js";
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAny_6AT2YAYjPttmne0jygcqOWtu23lvA",
            authDomain: "danielolifotografias.firebaseapp.com",
            databaseURL: "https://danielolifotografias-default-rtdb.firebaseio.com",
            projectId: "danielolifotografias",
            storageBucket: "danielolifotografias.appspot.com",
            messagingSenderId: "1084089897568",
            appId: "1:1084089897568:web:35fcfd9ddedf03620ae905"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const sendbtn = document.getElementById("sendbtn");
        var email = document.getElementById("email");

        const resetPassword = () => {
            sendPasswordResetEmail(auth, email.value)
                .then(() => {
                    alert('E-mail com link para redefinição de senha foi mandado para ' + email.value)
                })
                .catch((error) => {
                    console.error(error);
                });
        }

        sendbtn.addEventListener('click', resetPassword);

    </script>

    <div id="datadiv"></div>

    <footer>
        <p>Daniel Oli Photography © Designed by DSilva</p>
    </footer>

</body>

</html>